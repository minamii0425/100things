(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{4420:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/album",function(){return r(6983)}])},9430:function(e,n,r){"use strict";r.d(n,{Z:function(){return E}});var l=r(5893),t=r(7335),i=r(5309),a=r(3100),s=r(204),o=r(2498),c=r(4859),d=r(8911),h=r(1560),x=r(7306),u=r(2028),m=r(8e3),f=r(7379),g=r(3948),p=r(3838),j=r(4416),b=r(6877),y=r(8163),w=r(4741),k=r(6864),v=r(1664),S=r(7294),_=r(1163),C=r(5922);let z=[{label:"What's this Site",href:"/about"},{label:"100 Things",href:"/todos"},{label:"Album",href:"/album"},{label:"Map",href:"/map"}],T=()=>{let{isOpen:e,onToggle:n}=(0,t.q)(),r=(0,i.p)(),f=(0,_.useRouter)(),[g,p]=(0,S.useState)(""),j=async()=>{var e;let{data:n,error:r}=await C.O.auth.getSession();p(null===(e=n.session)||void 0===e?void 0:e.user.email)};(0,S.useEffect)(()=>{j()});let b=async()=>{let{error:e}=await C.O.auth.signOut();e&&r({title:"LogOut Failure",description:"Cannot Logout",status:"error",duration:9e3,isClosable:!0}),r({title:"Successfully Logged out",description:"Logout Successfully",status:"success",duration:9e3,isClosable:!0}),f.reload()};return(0,l.jsxs)(a.xu,{children:[(0,l.jsxs)(s.k,{bg:(0,o.ff)("white","gray.800"),color:(0,o.ff)("gray.600","white"),minH:"60px",py:{base:2},px:{base:4},borderBottom:0,borderStyle:"solid",borderColor:(0,o.ff)("gray.200","gray.900"),align:"center",children:[(0,l.jsx)(s.k,{flex:{base:1,md:"auto"},ml:{base:-2},display:{base:"flex",md:"none"},children:(0,l.jsx)(c.h,{onClick:n,icon:e?(0,l.jsx)(y.T,{w:3,h:3}):(0,l.jsx)(w.U,{w:5,h:5}),variant:"ghost","aria-label":"Toggle Navigation"})}),(0,l.jsxs)(s.k,{flex:{base:1},justify:{base:"center",md:"start"},children:[(0,l.jsx)(d.x,{textAlign:(0,h.S)({base:"center",md:"left"}),fontFamily:"heading",color:(0,o.ff)("gray.800","white"),children:"100Things"}),(0,l.jsx)(s.k,{display:{base:"none",md:"flex"},ml:10,children:(0,l.jsx)(N,{})})]}),(0,l.jsx)(x.K,{flex:{base:1,md:0},justify:"flex-end",direction:"row",spacing:6,children:void 0===g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.z,{as:"a",fontSize:"sm",fontWeight:400,variant:"link",href:"/signin",children:"Sign In"}),(0,l.jsx)(u.z,{as:"a",display:{base:"none",md:"inline-flex"},fontSize:"sm",fontWeight:600,color:"white",bg:"pink.400",_hover:{bg:"pink.300"},href:"/signup",children:"Sign Up"})]}):(0,l.jsx)(u.z,{display:{base:"none",md:"inline-flex"},fontSize:"sm",fontWeight:600,color:"white",bg:"pink.400",_hover:{bg:"pink.300"},onClick:b,children:"Log Out"})})]}),(0,l.jsx)(m.U,{in:e,animateOpacity:!0,children:(0,l.jsx)(I,{})})]})},N=()=>{var e;let n=(0,o.ff)("gray.600","gray.200"),r=(0,o.ff)("gray.800","white"),t=(0,o.ff)("white","gray.800");return(0,l.jsx)(x.K,{direction:"row",spacing:4,children:z.map(i=>(0,l.jsx)(a.xu,{children:(0,l.jsxs)(f.J,{trigger:"hover",placement:"bottom-start",children:[(0,l.jsx)(g.x,{children:(0,l.jsx)(p.r,{p:2,href:null!==(e=i.href)&&void 0!==e?e:"#",fontSize:"sm",fontWeight:500,color:n,_hover:{textDecoration:"none",color:r},children:i.label})}),i.children&&(0,l.jsx)(j.y,{border:0,boxShadow:"xl",bg:t,p:4,rounded:"xl",minW:"sm",children:(0,l.jsx)(x.K,{children:i.children.map(e=>(0,l.jsx)(O,{...e},e.label))})})]})},i.label))})},O=e=>{let{label:n,href:r,subLabel:t}=e;return(0,l.jsx)(p.r,{href:r,role:"group",display:"block",p:2,rounded:"md",_hover:{bg:(0,o.ff)("pink.50","gray.900")},children:(0,l.jsxs)(x.K,{direction:"row",align:"center",children:[(0,l.jsxs)(a.xu,{children:[(0,l.jsx)(d.x,{transition:"all .3s ease",_groupHover:{color:"pink.400"},fontWeight:500,children:n}),(0,l.jsx)(d.x,{fontSize:"sm",children:t})]}),(0,l.jsx)(s.k,{transition:"all .3s ease",transform:"translateX(-10px)",opacity:0,_groupHover:{opacity:"100%",transform:"translateX(0)"},justify:"flex-end",align:"center",flex:1,children:(0,l.jsx)(b.J,{color:"pink.400",w:5,h:5,as:k.X})})]})})},I=()=>(0,l.jsx)(x.K,{bg:(0,o.ff)("white","gray.800"),p:4,display:{md:"none"},children:z.map(e=>(0,l.jsx)(D,{...e},e.label))}),D=e=>{let{label:n,children:r,href:i}=e,{isOpen:a,onToggle:c}=(0,t.q)();return(0,l.jsxs)(x.K,{spacing:4,onClick:r&&c,children:[(0,l.jsxs)(s.k,{py:2,as:p.r,href:null!=i?i:"#",justify:"space-between",align:"center",_hover:{textDecoration:"none"},children:[(0,l.jsx)(d.x,{fontWeight:600,color:(0,o.ff)("gray.600","gray.200"),children:n}),r&&(0,l.jsx)(b.J,{as:v.v,transition:"all .25s ease-in-out",transform:a?"rotate(180deg)":"",w:6,h:6})]}),(0,l.jsx)(m.U,{in:a,animateOpacity:!0,style:{marginTop:"0!important"},children:(0,l.jsx)(x.K,{mt:2,pl:4,borderLeft:1,borderStyle:"solid",borderColor:(0,o.ff)("gray.200","gray.700"),align:"start",children:r&&r.map(e=>(0,l.jsx)(p.r,{py:2,href:e.href,children:e.label},e.label))})})]})},W=e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T,{}),e.children]});var E=W},6983:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return N}});var l=r(5893),t=r(1972),i=r(7335),a=r(3100),s=r(4418),o=r(8691),c=r(2028),d=r(8129),h=r(7754),x=r(7306),u=r(9594),m=r(4641),f=r(1708),g=r(776),p=r(6393),j=r(9162),b=r(8911),y=r(7294),w=r(9430),k=r(5922),v=r(2200),S=r(7676),_=r(9626),C=r(8958),z=r(9830);let T=e=>{let{body:n}=e,r=n.convertedTodoResponse.map(e=>({TodoName:e.TodoName,TodoID:e.TodoID})),[T,N]=(0,y.useState)(n.Images.flat()),O=(0,y.useRef)(null),[I,D]=(0,y.useState)([]),[W,E]=(0,y.useState)(!1),[X,A]=(0,y.useState)("1"),F=()=>{var e;null===(e=O.current)||void 0===e||e.click()},K=e=>{D(I.filter(n=>n.name!==e))},L=e=>{if(e.target.files){let n=Array.from(e.target.files);D([...I,...n])}},U=async e=>{let n=async e=>{let{fileList:n,bucketName:r}=e;try{E(!0);let{data:l,error:t}=await k.O.storage.from("images").list(X),i=null==l?void 0:l.map(e=>e.name),a=i.length,s=n.length;for(let o=0;o<=s-1;o++){let c=n[o],d="".concat(X,"/").concat(X,"-").concat(a+1+o,".jpg"),{data:h,error:x}=await k.O.storage.from(r).upload(d,c);if(console.log(T),N([...T,d]),x)throw x}return E(!1),"終了"}catch(u){return console.error({error:u}),E(!1),{pathname:null}}};if(!e||!e.length)return 1;let{pathname:r}=await n({fileList:e,bucketName:"images"});r&&console.debug({pathname:r}),D([])};(0,y.useEffect)(()=>{let e=new FormData;for(let n of I)e.append(n.name,n,n.name)},[I]);let q=(0,t.G)();console.log(q);let[P,H]=(0,y.useState)(""),J=e=>{R(),H(e)},{isOpen:M,onOpen:R,onClose:Z}=(0,i.q)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(w.Z,{children:[(0,l.jsxs)(a.xu,{m:10,children:[(0,l.jsxs)(a.xu,{ml:"auto",mr:"auto",children:[(0,l.jsx)(s.X,{textAlign:"center",mb:5,children:"Upload Image"}),(0,l.jsx)(s.X,{size:"md",mb:5,textAlign:"center",children:"1. Select Todo"}),(0,l.jsx)(o.P,{value:X,onChange:e=>A(e.target.value),width:[200,350,350,350,350],ml:"auto",mr:"auto",mb:5,children:r.map(e=>(0,l.jsxs)("option",{value:e.TodoID,children:["#",e.TodoID," ",e.TodoName]},e.TodoID))}),(0,l.jsxs)(a.xu,{mb:5,children:[(0,l.jsx)(s.X,{size:"md",mb:5,textAlign:"center",children:"2. Choose images to upload"}),(0,l.jsx)(c.z,{onClick:F,ml:"auto",mr:"auto",display:"block",colorScheme:"linkedin",children:"Select Image"}),(0,l.jsx)(d.I,{id:"file-upload",name:"file-upload",type:"file",ref:O,multiple:!0,accept:"image/png, image/jpeg",onChange:L,display:"none"}),(0,l.jsx)(h.M,{children:"base"===q?(0,l.jsx)(x.K,{mt:2,maxWidth:300,pl:4,pr:4,children:0!==I.length?I.map((e,n)=>(0,l.jsxs)(u.Vp,{onClick:()=>{K(e.name)},children:[(0,l.jsx)(u.Sn,{children:e.name}),(0,l.jsx)(u.SD,{})]},n)):""}):(0,l.jsx)(m.U,{mt:2,maxWidth:300,pl:4,pr:4,children:0!==I.length?I.map((e,n)=>(0,l.jsxs)(u.Vp,{onClick:()=>{K(e.name)},children:[(0,l.jsx)(u.Sn,{children:e.name}),(0,l.jsx)(u.SD,{})]},n)):""})})]}),(0,l.jsx)(h.M,{mb:5,children:(0,l.jsx)(c.z,{onClick:()=>U(I),isLoading:!!W,variant:"solid",colorScheme:"facebook",children:"Upload!"})})]}),(0,l.jsxs)(a.xu,{children:[(0,l.jsx)(s.X,{textAlign:"center",mb:5,children:"Album"}),(0,l.jsx)(f.r,{templateColumns:["repeat(1, 1fr)","repeat(2, 1fr)","repeat(3, 1fr)","repeat(4, 1fr)","repeat(5, 1fr)"],gap:[4,2,2,4,4],children:0!==T.length?T.map(e=>(0,l.jsx)(g.P,{onClick:()=>J(e),children:(0,l.jsx)(p.o,{ratio:1,children:(0,l.jsx)(j.E,{src:"https://tazizrmuwhjllipqdxld.supabase.co/storage/v1/object/public/images"+"/".concat(e),alt:"",objectFit:"cover"})})},e)):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(b.x,{children:"No Image"})})})]})]}),(0,l.jsxs)(v.u_,{isOpen:M,onClose:Z,children:[(0,l.jsx)(S.Z,{}),(0,l.jsxs)(_.h,{children:[(0,l.jsxs)(C.f,{children:[" ",(0,l.jsx)(j.E,{src:"https://tazizrmuwhjllipqdxld.supabase.co/storage/v1/object/public/images"+"/".concat(P),alt:"写真",width:"100%",mt:4})]}),(0,l.jsx)(z.m,{children:(0,l.jsx)(c.z,{colorScheme:"blue",mr:3,onClick:Z,children:"Close"})})]})]})]})})};var N=!0;n.default=T}},function(e){e.O(0,[511,590,774,888,179],function(){return e(e.s=4420)}),_N_E=e.O()}]);